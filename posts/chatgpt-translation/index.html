<!doctype html><html lang=en><head><title>ChatGPT for Novel Translation</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/application.650f674fc19266f4ea6c7b54bb6a4ffad10dfa641e3bea6de0a8472a99807590.css integrity="sha256-ZQ9nT8GSZvTqbHtUu2pP+tEN+mQeO+pt4KhHKpmAdZA="><link rel=icon type=image/png href=/images/site/zk-favicon_hube1e813c2c2088aca28be8f9b74a2dca_16753_42x0_resize_box_3.png><meta property="og:title" content="ChatGPT for Novel Translation"><meta property="og:description" content="ChatGPT for novel translation"><meta property="og:type" content="article"><meta property="og:url" content="https://zekun-li.github.io/posts/chatgpt-translation/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-25T00:00:00+00:00"><meta property="article:modified_time" content="2023-03-25T00:00:00+00:00"><meta name=description content="ChatGPT for novel translation"><script async src="https://www.googletagmanager.com/gtag/js?id=G-DEQFKK2CDH"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-DEQFKK2CDH",{anonymize_ip:!1})}</script></head><body class="type-posts kind-page" data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/site/zk-main-transp_huafc6864d78c8fdec171d529e6199f4b7_107023_42x0_resize_box_3.png alt=Logo>
Zekun's Zone</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=menu-icon-center src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme"></a>
<a class="dropdown-item nav-link" href=# data-scheme=dark><img class=menu-icon-center src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a>
<a class="dropdown-item nav-link" href=# data-scheme=system><img class=menu-icon-center src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div><img src=/images/site/zk-main-transp_huafc6864d78c8fdec171d529e6199f4b7_107023_42x0_resize_box_3.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/zk-inverted-transp_hu109326400271da0b02bd55eeaf589ffc_103282_42x0_resize_box_3.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts/ data-filter=all>Posts</a></li><div class=subtree><li><a href=/posts/server-jupyter-docker/ title="Run jupyter notebook in docker container on remote server">Run jupyter notebook in docker container on remote server</a></li><li><a href=/posts/cuda-error/ title="CUDA Errors and Solutions">CUDA Errors and Solutions</a></li><li><a href=/posts/clean-boot-dir/ title="Clean up boot directory when full">Clean up boot directory when full</a></li><li><a class=active href=/posts/chatgpt-translation/ title="ChatGPT for Novel Translation">ChatGPT for Novel Translation</a></li><li><a href=/posts/mapbox/ title="Display JPEG historical map tiles in Mapbox">Display JPEG historical map tiles in Mapbox</a></li><li><a href=/posts/mapnik/ title="Experience with Mapnik">Experience with Mapnik</a></li><li><a href=/posts/common-commands/ title="Common Commands">Common Commands</a></li><li><a href=/posts/dual-monitor/ title="Dual Monitors with Ubuntu 16.04 LTS">Dual Monitors with Ubuntu 16.04 LTS</a></li><li><a href=/posts/pi-timelapse/ title="Raspberry Pi Timelapse Video">Raspberry Pi Timelapse Video</a></li><li><a href=/posts/ssh-timeout/ title="Stop SSH connection from timeout">Stop SSH connection from timeout</a></li><li><a href=/posts/pi-connect-wifi/ title="Raspberry Pi Connect To WIFI with Command">Raspberry Pi Connect To WIFI with Command</a></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/posts/chatgpt-translation/hero.png)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/author/zekun_hub35c5a96dbe046beec5ae87b3c28a938_421003_120x120_fit_box_3.png alt="Author Image"><h5 class=author-name>Zekun Li</h5><p>Saturday, March 25, 2023</p></div><div class=title><h1>ChatGPT for Novel Translation</h1></div><div class=taxonomy-terms><ul style=padding-left:0><li class=rounded><a href=/tags/chatgpt/ class="btn, btn-sm">chatgpt</a></li><li class=rounded><a href=/tags/nlp/ class="btn, btn-sm">nlp</a></li></ul></div><div class=post-content id=post-content><p>ChatGPT is a powerful and versatile large language model that can assist in many NLP tasks. One such task is translation, and in this blog post, we will show you how to use ChatGPT to translate Chinese web novels into English.</p><h2 id=step-1-create-an-openai-account>Step 1: Create an OpenAI account</h2><p>Before you can use the ChatGPT model for novel translation, you need to create an OpenAI account to obtain an API key. This key will grant you access to the platform&rsquo;s powerful tools and resources, including the ChatGPT model.</p><p>To create an OpenAI account, go to <a href=https://platform.openai.com/signup target=_blank rel=noopener>https://platform.openai.com/signup</a> and follow the prompts to register. Once you have completed registration, you can view your API key by expanding the drop-down menu located at the top-right corner of the page. It is important to store your secret key in a secure location and not share it with anyone else.</p><figure><img src=/posts/chatgpt-translation/api.png height=400></figure><h2 id=step-2-install-the-openai-python-package>Step 2: Install the OpenAI Python Package</h2><p>With your API key in hand, you can now install the OpenAI Python package. This package will allow you to interface with the ChatGPT model and run translations on your local machine.</p><p>To install the package on your computer, open the terminal and type the following command:</p><p><code>pip install openai</code></p><p>This will download and install the package, which you can then import and use in your Python scripts.</p><h2 id=step-3-write-python-script>Step 3: Write Python Script</h2><p>By following these two steps, you will be ready to use the ChatGPT model for novel translation. With its powerful language processing capabilities, you can quickly and accurately translate Chinese web novels into English.</p><p>First, import the necessary packages:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> requests<span style=color:#f92672>,</span> uuid<span style=color:#f92672>,</span> json
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> argparse
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> cred <span style=color:#f92672>import</span> mykey, mylocation, chatkey
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> math
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> openai
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> pdb 
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> time
</span></span></code></pre></div><p>Then create a function <code>chatgpt_translate()</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>chatgpt_translate</span>(text_body):
</span></span><span style=display:flex><span>    <span style=color:#75715e># Set up the API key, chatkey is the secret key you just saved.</span>
</span></span><span style=display:flex><span>    openai<span style=color:#f92672>.</span>api_key <span style=color:#f92672>=</span> chatkey
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    response <span style=color:#f92672>=</span> openai<span style=color:#f92672>.</span>ChatCompletion<span style=color:#f92672>.</span>create(
</span></span><span style=display:flex><span>        model<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;gpt-3.5-turbo&#34;</span>, 
</span></span><span style=display:flex><span>        messages<span style=color:#f92672>=</span>[
</span></span><span style=display:flex><span>            {<span style=color:#e6db74>&#34;role&#34;</span>: <span style=color:#e6db74>&#34;system&#34;</span>, <span style=color:#e6db74>&#34;content&#34;</span>: <span style=color:#e6db74>&#34;You are a helpful assistant that translates Chinese to English for a novel.&#34;</span>},
</span></span><span style=display:flex><span>            {<span style=color:#e6db74>&#34;role&#34;</span>: <span style=color:#e6db74>&#34;user&#34;</span>, <span style=color:#e6db74>&#34;content&#34;</span>: <span style=color:#e6db74>&#39;translate following Chinese to English: &#39;</span><span style=color:#f92672>+</span>text_body}
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Extract the generated text from the response</span>
</span></span><span style=display:flex><span>    generated_text <span style=color:#f92672>=</span> response<span style=color:#f92672>.</span>choices[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>.</span>message<span style=color:#f92672>.</span>content<span style=color:#f92672>.</span>strip(<span style=color:#e6db74>&#39;Translation: </span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> generated_text
</span></span></code></pre></div><p>Define the main function that takes the novel in original language as input, and calls the chatgpt_translate() function</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>(args):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> open(args<span style=color:#f92672>.</span>input,<span style=color:#e6db74>&#39;r&#39;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>        data <span style=color:#f92672>=</span> f<span style=color:#f92672>.</span>readlines()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    data <span style=color:#f92672>=</span> [line <span style=color:#66d9ef>for</span> line <span style=color:#f92672>in</span> data <span style=color:#66d9ef>if</span> line <span style=color:#f92672>!=</span><span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#39;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> open(args<span style=color:#f92672>.</span>output, <span style=color:#e6db74>&#39;w&#39;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>pass</span> <span style=color:#75715e># flush content </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    num_requests <span style=color:#f92672>=</span> int(math<span style=color:#f92672>.</span>ceil(<span style=color:#ae81ff>1.</span> <span style=color:#f92672>*</span> len(data)<span style=color:#f92672>/</span>args<span style=color:#f92672>.</span>max_line) )
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(num_requests):
</span></span><span style=display:flex><span>        text_list <span style=color:#f92672>=</span> data[i <span style=color:#f92672>*</span> args<span style=color:#f92672>.</span>max_line : min((i<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>)<span style=color:#f92672>*</span>args<span style=color:#f92672>.</span>max_line, len(data))]
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        text_body <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>.</span>join(text_list)
</span></span><span style=display:flex><span>        response <span style=color:#f92672>=</span> chatgpt_translate(text_body)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>with</span> open(args<span style=color:#f92672>.</span>output, <span style=color:#e6db74>&#39;a&#39;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>            f<span style=color:#f92672>.</span>write(<span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\n\n</span><span style=color:#e6db74>&#39;</span>)
</span></span><span style=display:flex><span>            f<span style=color:#f92672>.</span>write(response)
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>        time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>10</span>)
</span></span></code></pre></div><p>Parse the arguments</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    parser <span style=color:#f92672>=</span> argparse<span style=color:#f92672>.</span>ArgumentParser(description<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Argument Parser&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;--input&#39;</span>, type<span style=color:#f92672>=</span>str, default <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;../xiaoshuo/hei_wu_zhi_xia/chapter_0001.txt&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;--max_line&#39;</span>, type <span style=color:#f92672>=</span> int, default <span style=color:#f92672>=</span> <span style=color:#ae81ff>50</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;--output&#39;</span>, type<span style=color:#f92672>=</span>str, default <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;../xiaoshuo/hei_wu_zhi_xia/translate_0001.txt&#39;</span>)
</span></span><span style=display:flex><span>    args <span style=color:#f92672>=</span> parser<span style=color:#f92672>.</span>parse_args()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    main(args)
</span></span></code></pre></div><h2 id=step-4-run-the-python-script>Step 4: Run the Python Script</h2><p>If you save the above code in a file called <code>chatgpt-translate.py</code>, then you can use this script like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>python3 chatgpt<span style=color:#f92672>-</span>translate<span style=color:#f92672>.</span>py <span style=color:#f92672>--</span>input<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;../xiaoshuo/hei_wu_zhi_xia/chapter_0002.txt&#39;</span> <span style=color:#f92672>--</span>output<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;../xiaoshuo/hei_wu_zhi_xia/translate_0002.txt&#39;</span>
</span></span></code></pre></div><p>If you need more information or help with the process, visit the OpenAI documentation at <a href=https://platform.openai.com/docs/api-reference/introduction target=_blank rel=noopener>https://platform.openai.com/docs/api-reference/introduction</a>.</p><p>Reference: <a href=https://platform.openai.com/docs/api-reference/introduction target=_blank rel=noopener>https://platform.openai.com/docs/api-reference/introduction</a></p></div><div class="row pl-3 pr-3"><div class="col-md-6 share-buttons"><strong>Share on:</strong>
<a class="btn btn-sm facebook-btn" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fzekun-li.github.io%2fposts%2fchatgpt-translation%2f" target=_blank><i class="fab fa-facebook"></i></a>
<a class="btn btn-sm twitter-btn" href="https://twitter.com/share?url=https%3a%2f%2fzekun-li.github.io%2fposts%2fchatgpt-translation%2f&text=ChatGPT%20for%20Novel%20Translation&via=Zekun%27s%20Zone" target=_blank><i class="fab fa-twitter"></i></a>
<a class="btn btn-sm reddit-btn" href="https://reddit.com/submit?url=https%3a%2f%2fzekun-li.github.io%2fposts%2fchatgpt-translation%2f&title=ChatGPT%20for%20Novel%20Translation" target=_blank><i class="fab fa-reddit"></i></a>
<a class="btn btn-sm linkedin-btn" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fzekun-li.github.io%2fposts%2fchatgpt-translation%2f&title=ChatGPT%20for%20Novel%20Translation" target=_blank><i class="fab fa-linkedin"></i></a>
<a class="btn btn-sm whatsapp-btn" href="https://api.whatsapp.com/send?text=ChatGPT%20for%20Novel%20Translation https%3a%2f%2fzekun-li.github.io%2fposts%2fchatgpt-translation%2f" target=_blank><i class="fab fa-whatsapp"></i></a>
<a class="btn btn-sm email-btn" href="mailto:?subject=ChatGPT%20for%20Novel%20Translation&body=https%3a%2f%2fzekun-li.github.io%2fposts%2fchatgpt-translation%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/zekun-li/zekun-li.github.io/edit/main/content/posts/chatgpt-translation/index.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/clean-boot-dir/ title="Clean up boot directory when full" class="btn btn-outline-info"><div><i class="fas fa-chevron-circle-left"></i> Prev</div><div class=next-prev-text>Clean up boot directory when full</div></a></div><div class="col-md-6 next-article"><a href=/posts/mapbox/ title="Display JPEG historical map tiles in Mapbox" class="btn btn-outline-info"><div>Next <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>Display JPEG historical map tiles in Mapbox</div></a></div></div><hr></div></div></div><a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#step-1-create-an-openai-account>Step 1: Create an OpenAI account</a></li><li><a href=#step-2-install-the-openai-python-package>Step 2: Install the OpenAI Python Package</a></li><li><a href=#step-3-write-python-script>Step 3: Write Python Script</a></li><li><a href=#step-4-run-the-python-script>Step 4: Run the Python Script</a></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://zekun-li.github.io#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://zekun-li.github.io#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=https://zekun-li.github.io#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=https://zekun-li.github.io#publications>Publications</a></li><li class=nav-item><a class=smooth-scroll href=https://zekun-li.github.io#projects>Selected Projects</a></li><li class=nav-item><a class=smooth-scroll href=https://zekun-li.github.io#accomplishments>Accomplishments</a></li><li class=nav-item><a class=smooth-scroll href=https://zekun-li.github.io#recent-posts>Recent Posts</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:li002666%20[Shift+2]%20umn.edu target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>li002666 [Shift+2] umn.edu</span></a></li><li><a href=https://github.com/zekun-li target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>zekun-li</span></a></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2023 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.5a59a766e8e997f2f176c1b59c50483017895b01fb586f707e6bfb0b7fbbb07a.js integrity="sha256-WlmnZujpl/LxdsG1nFBIMBeJWwH7WG9wfmv7C3+7sHo=" defer></script></body></html>